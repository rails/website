---
layout: post
title: "Keep your passwords secure, one way or the other"
categories: news
author: claudiob
og_image: assets/images/this-week-in-rails.png
published: true
date: 2025-11-07
---

Hi, it's [Claudio Baccigalupo](https://github.com/claudiob). Let's explore this week's changes in the Rails codebase.

[Add :algorithm option to has_secure_password](https://github.com/rails/rails/pull/56041)  
Active Model’s `has_secure_password` now supports different password hashing algorithms.

[Add built-in Argon2 support for has_secure_password](https://github.com/rails/rails/pull/56057)  
Building on top of the previous PR, you can now add `gem "argon2"` and then call `has_secure_password algorithm: :argon2`.
Unlike BCrypt's 72-byte restriction, Argon2 has no password length limit.

[New guides for Rails Engines](https://github.com/rails/rails/pull/55472)  
After months of rewriting, the [brand new Rails Engines guides are live](https://edgeguides.rubyonrails.org/engines.html)!

[Support international characters in humanize](https://github.com/rails/rails/pull/56077)  
Calling `ActiveSupport::Inflector.humanize("аБВГДЕ")` now correctly returns "Абвгде".

[Add ability to use a block when rendering a collection](https://github.com/rails/rails/pull/56044)  
When using a partial that yields, we could already use this partial with `render partial:` or `render @model`.
Now we can do that with collections as well, writing code like this:

```erb
// index.html.erb
<%= render @posts do |post| %>
  <%= link_to "Edit", [:edit, post] %>
<% end %>

// _post.html.erb
<article class="post">
  <h1><%= post.title %></h1>
  <%= yield post if block_given? %>
</article>
```

[Introduce Parameter Object: QueryIntent](https://github.com/rails/rails/pull/55897)  
A thorough improvement to Active Record internals which results in the deprecation of `exec_update`, `exec_delete`, and `exec_insert` in favor of `update`, `delete`, and `insert`.

[Make Rails 8.1 schema cache backward-compatible](https://github.com/rails/rails/pull/56101)  
Rails 8.1 changed [how the default value for a column is assigned](https://github.com/rails/rails/commit/205cdd50ba626325b26ce2919d5e961c6df50df0).
This PR ensures that a schema cache produced by Rails 8.1 can be deserialized by Rails 8.0 without any errors.

[Prevent duplicates when eager-loading models with a composite primary key](https://github.com/rails/rails/pull/56088)  
The code in `JoinDependency#instantiate` was not properly handling models with a composite primary key, resulting in duplicate records being returned.

[Fix the stylesheet_link_tag generated by rails new](https://github.com/rails/rails/pull/56086)  
`stylesheet_link_tag "application"` will be used when generating Rails apps with CSS bundling (for instance: `rails new myapp --css tailwind --js esbuild`).

[Fix double filtering rescue_from_handled backtrace](https://github.com/rails/rails/pull/56059)  
`ActionController::StructuredEventSubscriber` was taking the first frame of the backtrace and removing the Rails root. 
However, the event being consumed already did this, so the backtrace output was a single character.
This commit fixes the issue by removing the duplicate backtrace filtering.

[Use -infinity for lower value of unbounded PG time ranges](https://github.com/rails/rails/pull/56062)  
In PostgreSQL if you have a time range column (`daterange`, `tstzrange`, etc.) and save a record with a Ruby range that begins or ends with `nil` you were getting an unexpected behavior:

```ruby
Product.create(period: Time.utc(2000)...nil) # => ["2000-01-01 00:00:00",infinity)
Product.create(period: nil...Time.utc(2000)) # => (NULL,"2000-01-01 00:00:00")
```

The behavior has now been fixed to use `-infinity` rather than `NULL` for the lower value.

[Fix content_security_policy_nonce error in mailers](https://github.com/rails/rails/pull/56050)  
Fixes an error that you would get invoking `stylesheet_link_tag` in a mailer view with the default `content_security_policy.rb` enabled.


_You can view the whole list of changes [here](https://github.com/rails/rails/compare/@%7B2025-10-31%7D...main@%7B2025-11-07%7D)._  
_We had [22 contributors](https://contributors.rubyonrails.org/contributors/in-time-window/20251031-20251107) to the Rails codebase this past week!_

Until next time!  

_[Subscribe](https://world.hey.com/this.week.in.rails) to get these updates mailed to you._
